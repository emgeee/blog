<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014/5 | Makeshift Notebook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Makeshift Notebook">
<meta property="og:url" content="http://emgeee.com/blog//blog/archives/2014/05/">
<meta property="og:site_name" content="Makeshift Notebook">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Makeshift Notebook">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Makeshift Notebook" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" type="text/css">
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog//" id="logo">Makeshift Notebook</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog//">Home</a>
        
          <a class="main-nav-link" href="/blog//archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://emgeee.com/blog/"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-201405homebrew-and-python-tale-of-installinghtml" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/05/17/201405homebrew-and-python-tale-of-installinghtml/" class="article-date">
  <time datetime="2014-05-17T07:15:00.000Z" itemprop="datePublished">May 17 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/brew/">brew</a>►<a class="article-category-link" href="/blog/categories/brew/vim/">vim</a>►<a class="article-category-link" href="/blog/categories/brew/vim/howto/">howto</a>►<a class="article-category-link" href="/blog/categories/brew/vim/howto/powerline/">powerline</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2014/05/17/201405homebrew-and-python-tale-of-installinghtml/">Homebrew and Python - A tale of Installing Powerline</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div class="css-full-post-content js-full-post-content">
<h3>Introduction</h3>The other day I was attempting to install <a href="https://github.com/Lokaltog/powerline" target="_blank" rel="external">powerline</a>&nbsp;to make my Vim setup look prettier when I ran into some trouble with how my system was configured. For those who don't know, powerline is a neat status bar written in Python that provides various visual cues like what mode you are currently in. The&nbsp;<a href="https://powerline.readthedocs.org/en/latest/installation/osx.html#installation-osx" target="_blank" rel="external">instructions</a>&nbsp;for Mac told me install the package via&nbsp;<a href="https://pypi.python.org/pypi/pip" target="_blank" rel="external">pip</a>, a Python package management system. This sounded easy enough however I quickly ran into some nuanced issues that had to be resolved.<br><br><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://raw.github.com/Lokaltog/powerline/develop/docs/source/_static/img/pl-mode-normal.png" imageanchor="1" style="margin-left: auto; margin-right: auto;" target="_blank" rel="external"><img border="0" height="10" src="https://raw.github.com/Lokaltog/powerline/develop/docs/source/_static/img/pl-mode-normal.png" width="400"></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Example from the Github README file</td></tr></tbody></table><br><h3>Default Python on Mac</h3><div>By default, OSX comes preinstalled with several versions of Python. Theses version are used as dependencies for various software and, in general, should not really be messed with. The executables are made available via the <b>/usr/bin</b>&nbsp;directory and should link back to <b>/System/Library/Frameworks/Python.framework/Versions/2.7/bin/</b>. This is all well and good, however, there are a few problems: firstly, the version of Python in this directory is not necessarily up to day. For me,<b>&nbsp;/usr/bin/python --version</b>&nbsp;yields version 2.7.5 while the most recent version is 2.7.6. More importantly, installing Python packages via the included version of pip require root access (<b>sudo pip install &lt;package name&gt;</b>) because packages are saved to&nbsp;<b>/Library/Python/2.7/site-packages</b>. Automatically running install scripts that are downloaded form the internet with root privileges is generally considered a possibly security risk and is something I strive to avoid at all cost.</div><div><br></div><h3>Enter Homebrew</h3><div>To rectify both these issues, I used the wonderful <a href="http://brew.sh/" target="_blank" rel="external">Homebrew</a>&nbsp;(brew) package management system. By design, brew promises to never write files outside the directory specified by <b>brew --prefix</b>&nbsp;which defaults to <b>/usr/local</b>/. Package information is saved to <b>/usr/local/Cellar </b>and executables are linked to <b>/usr/local/bin</b>. The beauty of this is that these directories don't require root privileges to write to meaning if you ever need to <b>sudo brew</b>&nbsp;anything, you're probably doing something wrong.</div><div><br></div><div>To install an updated version of python, simple enter <b>brew install python</b>. Because brew will detect you already have a version of python installed on your system, it may be necessary to run <b>brew link python</b>, which will symlink the appropriate executables to <b>/usr/local/bin</b>. Now, assuming you have <b>/usr/local/bin</b>&nbsp;in your $PATH (which you should), invoking <b>which python</b>&nbsp;should show you that you are now running the brewed version of python and <b>python --version</b>&nbsp;should now yield 2.7.6.</div><div><br></div><div><br></div><div>Rejoice! You should now have an updated version of python installed and managed by brew. <b>which pip</b>&nbsp;should also show you are running the version that accompanied the brewed python.</div><div><br></div><h3>Installing powerline</h3><div>As mentioned earlier, powerline can be installed using pip. The exact command given by <a href="https://powerline.readthedocs.org/en/latest/installation/osx.html#installation-osx" target="_blank" rel="external">the documentation</a>&nbsp;is&nbsp;<b>pip install --user git+git://github.com/Lokaltog/powerline</b>. Unfortunately, this presents an issue for brewed python. According to the brew-python documentation at&nbsp;<a href="https://github.com/Homebrew/homebrew/wiki/Homebrew-and-Python" target="_blank" rel="external">https://github.com/Homebrew/homebrew/wiki/Homebrew-and-Python</a></div><blockquote class="tr_bq"><span style="background-color: white; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25.5px;">The normal&nbsp;</span><code style="background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px; padding: 0px;">pip install --user</code><span style="background-color: white; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25.5px;">&nbsp;is disabled for brewed Python. This is because of a bug in distutils, because Homebrew writes a&nbsp;</span><code style="background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px; padding: 0px;">distutils.cfg</code><span style="background-color: white; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25.5px;">&nbsp;which sets the package&nbsp;</span><code style="background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px; padding: 0px;">prefix</code><span style="background-color: white; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25.5px;">.</span></blockquote>Fortunately, the fix is quite simple. If you've installed python via brew, you can safely remove the <b>--user</b>&nbsp;flag, which instructs pip to install the package into the <b>~/Library/Python/&lt;x&gt;.&lt;y&gt;/lib/python/site-packages</b>/ directory. Instead, pip will install the package into&nbsp;<b>/usr/local/lib/python2.7/site-packages</b>, which shouldn't require root privileges.<br><br><h3>Configuring Vim</h3><div>The final step is to configure Vim (or whatever else you'd like to user powerline for). If, like me, you use vim or macvim installed through brew, you may have to do one last step. In order for powerline to work, Vim needs to be compiled with python support. Brew does this automatically at install time howeve, it relies on the first version of python found in the user's $PATH when the program is installed. If you did not have brew installed python at the time you installed vim or macvim, you will need to reinstall these versions using something like&nbsp;<b>brew reinstall macvim &lt;insert options like --enable-lua&gt;</b>. Vim will now be linked against the correct version of python and have access to the installed modules.</div><div><b><br></b></div><div>You should now be able to add the following lines to your vimrc file and bask in the glory of a nifty status bar</div><blockquote class="tr_bq"><pre style="background-color: white; box-sizing: border-box; color: #404040; font-family: Consolas, Monaco, monospace; font-size: 12px; line-height: 1.5; overflow: auto; padding: 12px;">python from powerline.<span class="k" style="box-sizing: border-box; font-weight: bold;">vim</span> import setup <span class="k" style="box-sizing: border-box; font-weight: bold;">as</span> powerline_setup<br>python powerline_setup<span class="p" style="box-sizing: border-box;">()</span><br>python <span class="k" style="box-sizing: border-box; font-weight: bold;">del</span> powerline_setup</pre></blockquote><br>Those are some of the things I learned while wrestling with brew and python for several hours. I have been using brew for a year or so prior to this without necessarily understanding some of the finer points of the system and no doubt had a lot of cruft on my machine as a result. Hopefully something in this post can save someone out there some time and/or headaches.
</div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://emgeee.com/blog/2014/05/17/201405homebrew-and-python-tale-of-installinghtml/" data-id="6rz3chl4ptjkxy8r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Computer-Controlling-NeoPixelshtml" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/05/13/Computer-Controlling-NeoPixelshtml/" class="article-date">
  <time datetime="2014-05-13T09:20:00.000Z" itemprop="datePublished">May 13 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/electronics/">electronics</a>►<a class="article-category-link" href="/blog/categories/electronics/arduino/">arduino</a>►<a class="article-category-link" href="/blog/categories/electronics/arduino/alarm-clock/">alarm clock</a>►<a class="article-category-link" href="/blog/categories/electronics/arduino/alarm-clock/hardware/">hardware</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2014/05/13/Computer-Controlling-NeoPixelshtml/">Computer Controlling NeoPixels</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div class="css-full-post-content js-full-post-content">
<span style="font-family: Arial; font-size: 13px;">The other day I received a <a href="http://www.adafruit.com/category/168" target="_blank" rel="external">NeoPixel</a> strip </span><span style="font-family: Arial; font-size: 13px;">from <a href="http://adafruit.com./" target="_blank" rel="external">adafruit.com</a>.&nbsp;NeoPixels are really cool tricolor LED lights that are individual addressable and come in several form factors including strips and, rights, and matrices. As is my habit whenever I buy new electronic gadgets, my first order of business was to wire the strip to be controllable by a computer. Doing this first entails hooking up the light strip to a power source and connecting it to and Arduino, which will ultimately serve as the intermediary between the computer and the light strip.</span><br><span style="font-family: Arial; font-size: 13px;"><br></span><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-vB0HrbAX28U/U3F8hiIoNCI/AAAAAAAAAWo/575ABhunpl0/s1600/IMG_20140512_185127.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" target="_blank" rel="external"><img border="0" src="http://1.bp.blogspot.com/-vB0HrbAX28U/U3F8hiIoNCI/AAAAAAAAAWo/575ABhunpl0/s1600/IMG_20140512_185127.jpg" height="480" width="640"></a></div><span style="font-family: Arial; font-size: 13px;"><br></span><span style="font-family: Arial; font-size: 13px;"><span id="goog_1069271578"></span><span id="goog_1069271579"></span><br></span><br><span style="font-family: Arial; font-size: x-small;">Using the wonderfully easy&nbsp;<a href="https://github.com/adafruit/Adafruit_NeoPixel" target="_blank" rel="external">NeoPixel Arduino library</a>&nbsp;with some of the provided sample code, I was able to confirm everything was wired correctly while also loosing focus temporarily due to the pretty flashing lights...</span><br><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;">Back on track.</span><br><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;">Initially, I wanted to use the the&nbsp;<a href="http://www.firmata.org/wiki/Main_Page" target="_blank" rel="external">firmata</a>&nbsp;Arduino library to facillitate the computer-&gt;NeoPixel communication, however, I quickly realized that this would not work. Firmata was designed to be able to give the computer control over the Arduino's individual I/O pins and resources including things like PWM and I2c. This means that if you want to diddle a pin several hundred times a second, you would need to have the the host computer send an individual command over USB to the Arduino to either set the pin high or set the pin low. Timing was already critical with the NeoPixel protocol and having that extra latency was just not going to work. Instead, I settled on a a very simple variable byte protocol that allows me to easily send a command to control the entire strip as one unit or toggle individual pixels as necessary. Essentially, the Arduino sits and waits for a single byte to be received over serial and depending what that byte is, will either perform an action or wait for more bytes. Currently, this solution has a limit of 252 different NeoPixels that can be controlled, by seeing as how I only have 60 hooked up, this shouldn't be a problem.</span><br><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;">The light strip can now be controlled via language that can spit bytes out over a serial port but my go-to language for these situations tends to by Python. Armed with the trust <a href="http://pyserial.sourceforge.net/" target="_blank" rel="external">pySerial</a> library, I can now add a fancy light show to any Python program I wish.</span><br><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;">This is only the beginning of this project, there is more to come!</span><br><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span><span style="font-family: Arial; font-size: x-small;"><br></span>
</div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://emgeee.com/blog/2014/05/13/Computer-Controlling-NeoPixelshtml/" data-id="1nkbl1g76xq18o3r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/brew/">brew</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/brew/vim/">vim</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/brew/vim/howto/">howto</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/brew/vim/howto/powerline/">powerline</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/electronics/">electronics</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/electronics/arduino/">arduino</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/electronics/arduino/alarm-clock/">alarm clock</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/electronics/arduino/alarm-clock/hardware/">hardware</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/keyboard/">keyboard</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/keyboard/ergodox/">ergodox</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/livereload/">livereload</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/livereload/cordova/">cordova</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/livereload/cordova/howto/">howto</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/livereload/cordova/howto/apps/">apps</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/livereload/cordova/howto/apps/gulp/">gulp</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/mobile/">mobile</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/mobile/hacks/">hacks</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/mobile/hacks/web-audio/">web audio</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/travel/">travel</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/travel/thailand/">thailand</a><span class="category-list-count">2</span></li></ul></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/06">June 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/05">May 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/04">April 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2013/06">June 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2013/05">May 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2013/03">March 2013</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2014/06/12/201406livereload-with-cordova-and-gulphtml/">Livereload with Cordova and Gulp</a>
          </li>
        
          <li>
            <a href="/blog/2014/06/01/201405buffering-audio-in-parallel-on-mobilehtml/">Buffering Audio in Parallel on Mobile with Web Audio API</a>
          </li>
        
          <li>
            <a href="/blog/2014/05/17/201405homebrew-and-python-tale-of-installinghtml/">Homebrew and Python - A tale of Installing Powerline</a>
          </li>
        
          <li>
            <a href="/blog/2014/05/13/Computer-Controlling-NeoPixelshtml/">Computer Controlling NeoPixels</a>
          </li>
        
          <li>
            <a href="/blog/2014/04/29/201404ergodox-build-loghtml/">Ergodox Build Log</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Matt Green<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog//" class="mobile-nav-link">Home</a>
  
    <a href="/blog//archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/blog/js/script.js" type="text/javascript"></script>
  </div>
</body>
</html>